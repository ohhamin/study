# 페이징, 세그먼테이션

다중 프로그래밍 시스템에 여러 프로세스를 수용하기 위해 주기억장치를 동적 분할하는 메모리 관리 작업이 필요하기 때문에 사용

### 메모리 관리 기법

##### 1. 연속 메모리 관리

프로그램 전체가 하나의 커다란 공간에 연속적으로 할당되어야 함

- 고정 분할 기법 : 주기억장치가 고정된 파티션으로 분할 (내부 단편화 발생)

- 동적 분할 기법 : 파티션들이 동적 생성되며 자신의 크기와 같은 파티션에 적재 (외부 단편화 발생)

##### 2. 불연속 메모리 관리

프로그램의 일부가 서로 다른 주소 공간에 할당될 수 있는 기법

페이지 : 고정 사이즈의 작은 프로세스 조각

프레임 : 페이지 크기와 같은 주기억장치 메모리 조각

단편화 : 기억장치의 빈 공간 or 자료가 여러 조각으로 나뉘는 현상

세그먼트 : 서로 다른 크기를 가진 논리적 블록이 연속적 공간에 배치되는 것

고정크기 : 페이징

가변크기 : 세그먼테이션

- 단순 페이징
  
  각 프로세스는 프레임들과 같은 길이를 가진 균등 페이지로 나눔
  
  외부 단편화 X
  
  소량의 내부 단편화 존재

- 단순 세그먼테이션
  
  각 프로세스는 여러 세그먼트들로 나뉨
  
  내부 단편화 X, 메모리 사용 효율 개선, 동적 분할을 통한 오버헤드 감소
  
  외부 단편화 존재

- 가상 메모리 페이징
  
  단순 페이징과 비교해 프로세스 페이지 전부를 로드시킬 필요 X
  
  필요한 페이지가 있으면 나중에 자동으로 불러들어짐
  
  외부 단편화 X
  
  복잡한 메모리 관리로 오버헤드 발생

- 가상 메모리 세그먼테이션
  
  필요하지 않은 세그먼트들은 로드되지 않음
  
  필요한 세그먼트 있을 때 나중에 자동으로 불러들어짐
  
  내부 단편화 X
  
  복잡한 메모리 관리로 오버헤드 발생

### 페이지 교체 알고리즘

메모리가 가득 차면 추가로 페이지를 가져오기 위해 안쓰는 페이지는 out하고 필요한 페이지를 in 시켜야 함

1. FIFO 알고리즘
   
   메모리에 먼저 올라온 페이지를 먼저 내보내는 알고리즘
   
   가장 간단한 방법으로 특히 초기화 코드에서 적절한 방법

2. OPT 알고리즘
   
   앞으로 가장 사용하지 않을 페이지를 가장 우선적으로 내보냄
   
   효율적이지만 실질적으로 페이지가 앞으로 잘 사용되지 않을 것이라는 보장이 없기 때문에 수행하기 어려움

3. LRU 알고리즘
   
   최근에 사용하지 않은 페이지를 가장 먼저 내려보내는 알고리즘
   
   OPT보단 페이지 결함이 더 일어날 수 있지만, 실제로 사용할 수 있는 페이지 교체 알고리즘에서는 가장 좋은 방법 중 하나

##### 교체 방식

- Global 교체 : 메모리 상의 모든 프로세스 페이지에 대해 교체하는 방식

- Local 교체 : 메모리 상의 자기 프로세스 페이지만 교체하는 방식

다중 프로그래밍의 경우, 메인 메모리에 다양한 프로세스가 동시에 올라갈 수 있음

따라서, 다양한 프로세스의 페이지가 메모리에 존재하는데, 선정 기준을 Global, Local 차이

-> 실제로는 전체를 기준으로 페이지를 교체하는 것이 더 효율적이라고 함. 자기 프로세스 페이지에서만 교체하면, 교체를 해야할 때 각각 모두 교체를 진행해야 하므로 비효율적
